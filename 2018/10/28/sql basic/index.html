<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>hello</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="#SQL基础学习简单的总结（一） #数据库操作 建立一个新数据库：create  database  数据库名 指定当前数据库：database  数据库名 关闭当前数据库：close  database  数据库名 撤消一个数据库：drop  database  数据库名  #基本表 ##基本表的定义（CREATE）   12345678910111213create  table   表名（">
<meta property="og:type" content="article">
<meta property="og:title" content="hello">
<meta property="og:url" content="http://yoursite.com/2018/10/28/sql basic/index.html">
<meta property="og:site_name" content="hello">
<meta property="og:description" content="#SQL基础学习简单的总结（一） #数据库操作 建立一个新数据库：create  database  数据库名 指定当前数据库：database  数据库名 关闭当前数据库：close  database  数据库名 撤消一个数据库：drop  database  数据库名  #基本表 ##基本表的定义（CREATE）   12345678910111213create  table   表名（">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-10-28T15:19:05.653Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="hello">
<meta name="twitter:description" content="#SQL基础学习简单的总结（一） #数据库操作 建立一个新数据库：create  database  数据库名 指定当前数据库：database  数据库名 关闭当前数据库：close  database  数据库名 撤消一个数据库：drop  database  数据库名  #基本表 ##基本表的定义（CREATE）   12345678910111213create  table   表名（">
  
    <link rel="alternate" href="/atom.xml" title="hello" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">hello</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-sql basic" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/10/28/sql basic/" class="article-date">
  <time datetime="2018-10-28T12:28:32.894Z" itemprop="datePublished">2018-10-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#SQL基础学习简单的总结（一）</p>
<p>#数据库操作</p>
<p>建立一个新数据库：<br><code>create  database  数据库名</code></p>
<p>指定当前数据库：<br><code>database  数据库名</code><br></p>
<p>关闭当前数据库：<br><code>close  database  数据库名</code><br></p>
<p>撤消一个数据库：<br><code>drop  database  数据库名</code></p>
<p><br></p>
<p>#基本表</p>
<p>##基本表的定义（CREATE）  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">create  table   表名（       </span><br><span class="line">        列名  数据类型  [default  缺省值]  [not null]</span><br><span class="line">        [，列名 数据类型  [default  缺省值]  [not null]] </span><br><span class="line">                          ……      </span><br><span class="line">        [，primary  key（列名 [，列名] …）]       </span><br><span class="line">	    [，foreign  key （列名 [，列名] …） references  表名 （列名 [，列名] …）]       </span><br><span class="line">	    [，check（条件）] </span><br><span class="line">)</span><br><span class="line">    </span><br><span class="line">```     </span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">例：</span><br></pre></td></tr></table></figure>
<p>create   table   PROF<br>     ( PNO    char(10),<br>     PNAME  char(20) not null,<br>     SAL   int,<br>     AGE   int,<br>     DNO   char(10),<br>     primary key (PNO),<br>     foreign key (DNO) references DEPT(DNO),<br>     check (SAL &gt; 0))<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##修改基本表定义（ALTER） </span><br><span class="line">格式：  </span><br><span class="line">```       </span><br><span class="line">ALTER TABLE &lt;表名&gt;</span><br><span class="line">      [ ADD &lt;新列名&gt; &lt;数据类型&gt; [ 完整性约束 ] ] --增加新列        </span><br><span class="line">      [ DROP &lt;列名、完整性约束名&gt; ]              --删除列      </span><br><span class="line">      [ ALTER COLUMN&lt;列名&gt; &lt;数据类型&gt; ]；        --修改列定义</span><br></pre></td></tr></table></figure></p>
<p>##撤消基本表定义（drop）<br>格式：<br><code>drop  table  表名 ［RESTRICT| CASCADE］；</code></p>
<p>RESTRICT：缺省，如果存在依赖该表的对象，则此表不能被删除<br>CASCADE：在删除基本表的同时，相关的依赖对象一起删除 </p>
<p><br></p>
<p>#索引</p>
<p>##索引的定义<br>格式:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">create  [unique|distinct]  [cluster]  index  索引名      </span><br><span class="line">on  表名 (列名 [asc|desc]  [ , 列名[asc|desc]]…) </span><br><span class="line">``` </span><br><span class="line">   </span><br><span class="line">unique|distinct：唯一性索引，不允许表中不同的行在 索引列上取相同值。</span><br><span class="line">cluster：聚集索引，表中元组按索引项的值排序并物 理地聚集在一起。一个基本表上只能建一个聚集索引。     </span><br><span class="line">asc|desc：索引表中索引值的排序次序，缺省为asc。</span><br><span class="line">###在最经常查询的列上建立聚簇索引以提高查询效率。 经常更新的列不宜建立聚簇索引。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##索引的删除 </span><br><span class="line">格式：   </span><br><span class="line">`drop  index   索引名`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;br&gt;</span><br><span class="line">#数据查询</span><br><span class="line"> </span><br><span class="line">##单表查询</span><br></pre></td></tr></table></figure></p>
<p>SELECT [ALL|DISTINCT] &lt;目标列表达式&gt; [，&lt;目标列表达式&gt;] …<br>FROM &lt;表名或视图名&gt;[， &lt;表名或视图名&gt; ] …<br>[ WHERE &lt;条件表达式&gt; ]<br>[ GROUP BY &lt;列名1&gt; [ HAVING &lt;条件表达式&gt; ] ]<br>[ ORDER BY &lt;列名2&gt; [ ASC|DESC ] ]；<br>ALL：缺省，显示结果不删除重复行<br>DISTINCT：显示结果删除重复行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">###更名运算：</span><br></pre></td></tr></table></figure></p>
<p>old_name as new_name(as可省略)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">###Like </span><br><span class="line">四种匹配模式：</span><br><span class="line">1、%：表示任意0个或多个字符。可匹配任意类型和长度的字符。</span><br><span class="line">`SELECT * FROM [user] WHERE u_name LIKE &apos;k%&apos;`</span><br><span class="line"></span><br><span class="line">2、\_： 表示任意单个字符。匹配单个任意字符，它常用来限定表达式的字符长度语句：</span><br><span class="line">`SELECT * FROM [user] WHERE u_name LIKE &apos;k_&apos;`</span><br><span class="line"></span><br><span class="line">3、[ ]：表示括号内所列字符中的一个（类似正则表达式）。指定一个字符、字符串或范围，要求所匹配对象为它们中的任一个。</span><br><span class="line">`SELECT * FROM [user] WHERE u_name LIKE &apos;[赵钱孙李]小明&apos;`</span><br><span class="line"></span><br><span class="line">4、[^ ] ：表示不在括号所列之内的单个字符。其取值和 [] 相同，但它要求所匹配对象为指定字符以外的任一个字符。</span><br><span class="line">`SELECT * FROM [user] WHERE u_name LIKE &apos;[^赵钱孙李]小明&apos;`</span><br><span class="line"></span><br><span class="line">定义转义字符，以去掉特殊字符的特定含义，使其被作为普通字符看待。</span><br><span class="line">可用\%去匹配 %，用\＿去匹配＿，用\ \去匹配 \ </span><br><span class="line">`LIKE &apos;DB\ Design&apos; ESCAPE &apos;\&apos;`</span><br><span class="line">ESCAPE ‘＼’ 表示“ ＼” 为换码字符</span><br><span class="line">###order by排序</span><br><span class="line">`order by    列名   [asc | desc]; `</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">可以按一个或多个属性列排序 </span><br><span class="line">升序：ASC；降序：DESC；缺省值为升序 </span><br><span class="line">###聚集函数： </span><br><span class="line">计数 COUNT（[DISTINCT|ALL] *） COUNT（[DISTINCT|ALL] &lt;列名&gt;） </span><br><span class="line">计算总和 SUM（[DISTINCT|ALL] &lt;列名&gt;） </span><br><span class="line">计算平均值 AVG（[DISTINCT|ALL] &lt;列名&gt;） </span><br><span class="line">最大值    MAX（[DISTINCT|ALL] &lt;列名&gt;）   &gt;</span><br><span class="line">最小值    MIN（[DISTINCT|ALL] &lt;列名</span><br><span class="line">例:计算1号课程的学生平均成绩。 </span><br><span class="line">`SELECT AVG(Grade)           FROM SC           WHERE Cno= &apos; 1 &apos;	 `</span><br><span class="line"></span><br><span class="line">###group by分组</span><br><span class="line">group by   列名  [having   条件表达式]</span><br><span class="line">group by将表中的元组按指定一列或多列上的值相等的 原则分组，然后在每一分组上使用聚集函数，得到单一值。 </span><br><span class="line">having则对分组进行选择，只将聚集函数作用到满足条件的分组上。 </span><br><span class="line">例：列出所有课程均及格 的学生的平均成绩。</span><br></pre></td></tr></table></figure></p>
<p>select SNO，avg(SCORE)<br>from SC<br>group by SNO<br>having min(SCORE) &gt;= 60<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##连接查询 </span><br><span class="line">###自然连接：</span><br><span class="line">两个表有同名的属性，此属性值相等的元组相连</span><br><span class="line">例:</span><br><span class="line">``` </span><br><span class="line"> SELECT  S.Sno，Sname，Ssex，Sage，Sdept，Cno，Grade </span><br><span class="line"> FROM     S，SC </span><br><span class="line"> WHERE  S.Sno = SC.Sno</span><br></pre></td></tr></table></figure></p>
<p>###自身连接：<br>一个表与其自己进行连接,需要给表起别名以示区别,由于所有属性名都是同名属性，因此必须使用别名前缀<br>例:查询每一门课的间接先修课（即先修课的先修课）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT FIRST.Cno，SECOND.Cpno      </span><br><span class="line">FROM Course FIRST，Course SECOND     </span><br><span class="line">WHERE FIRST.Cpno = SECOND.Cno</span><br></pre></td></tr></table></figure></p>
<p>###外连接:<br>自然连接时，可能会有信息因为失配而在结果中丢失，为避免丢失，可以假定往另一个参与连接的表中附加一个取值全为空值的行，失配的行会和空值行匹配，不至于丢失，称之为外连接。<br> 外连接 = 自然连接 + 失配的元组<br>[例]查询每个学生及其选修课程的情况<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT Student.Sno，Sname，Ssex，Sage，Sdept，Cno，Grade     </span><br><span class="line">FROM  Student  LEFT OUT JOIN SC ON (Student.Sno=SC.Sno)</span><br></pre></td></tr></table></figure></p>
<p>###复合条件连接：<br>WHERE子句中含多个连接条件<br>例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT S.Sno，Sname，Cname，Grade    </span><br><span class="line">FROM S，SC，Course    /*多表连接*/    </span><br><span class="line">WHERE S.Sno = SC.Sno                     </span><br><span class="line">and SC.Cno = Course.Cno；</span><br></pre></td></tr></table></figure></p>
<p>####FROM S，SC，Course三者做相当于笛卡尔积    </p>
<p>##嵌套查询<br>不相关子查询：子查询的查询条件不依赖于父查询，由里向外 逐层处理。即每个子查询在上一级查询处理 之前求解，子查询的结果用于建立其父查询的查找条件。<br>相关子查询：子查询的查询条件依赖于父查询，首先取外层查询中表的第一个元组，根据它与内层查询相关的属性值处理内层查询，若WHERE子句返回值为真，则取此元组放入结果表 然后再取外层表的下一个元组重复这一过程，直至外层表全部检查完为止。（有点像for循环）</p>
<p>不相关例子：<br>查询与“刘晨”在同一个系学习的学生<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT Sno，Sname，Sdept      </span><br><span class="line">FROM Student     </span><br><span class="line">WHERE Sdept  IN (SELECT Sdept                    </span><br><span class="line">				 FROM Student                    </span><br><span class="line">				 WHERE Sname= ‘ 刘晨 ’);</span><br></pre></td></tr></table></figure></p>
<p>相关例子：<br>找出每个学生超过他选修课程平均成绩的课程号。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT Sno,Cno     </span><br><span class="line">FROM SC x     /*更名 as可省略*/</span><br><span class="line">WHERE Grade &gt;=(SELECT AVG(Grade)                            </span><br><span class="line">	           FROM  SC y                                    </span><br><span class="line">			   WHERE y.Sno=x.Sno);</span><br></pre></td></tr></table></figure></p>
<p>###带有ANY（SOME）或ALL谓词的子查询<br> ANY：任意一个值<br>ALL：所有值<br>格式为：表达式   比较运算符  ANY|ALL （子查询）<br>例：查询其他系中比计算机科学系所有学生年龄都小 的学生姓名及年龄。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT Sname，Sage     </span><br><span class="line">FROM S     </span><br><span class="line">WHERE Sage &lt; ALL (SELECT Sage              </span><br><span class="line">				  FROM S              </span><br><span class="line">				  WHERE Sdept= &apos; CS &apos;)        </span><br><span class="line">      AND Sdept &lt;&gt; &apos; CS ’;</span><br></pre></td></tr></table></figure></p>
<p>###带有EXISTS谓词的子查询<br>例：查询所有选修了1号课程的学生姓名。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT Sname      </span><br><span class="line">FROM S      </span><br><span class="line">WHERE EXISTS (SELECT *               </span><br><span class="line">			  FROM SC             </span><br><span class="line">			  WHERE Sno=S.Sno AND Cno= &apos; 1 &apos;);</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/10/28/sql basic/" data-id="cjnt0ulf600002sv3lhm7sms3" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2018/10/23/hello/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">hello</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/10/28/sql basic/">(no title)</a>
          </li>
        
          <li>
            <a href="/2018/10/23/hello/">hello</a>
          </li>
        
          <li>
            <a href="/2018/10/23/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 wzs63<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>